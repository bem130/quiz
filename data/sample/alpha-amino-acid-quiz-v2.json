{
  "title": "Alpha Amino Acid Quiz (demo with tips)",
  "description": "Demo quiz to test patterns, tips, and multiple question types for alpha amino acids.",
  "version": 2,
  "color": 130,
  "entitySet": {
    "id": "alpha-amino-acids",
    "entities": {
      "gly": {
        "nameEnCap": "Glycine",
        "nameEn": "glycine",
        "nameJa": "グリシン",
        "sideChainFormula": "-H",
        "sideChainFormulaTex": "\\ce{-H}"
      },
      "ala": {
        "nameEnCap": "Alanine",
        "nameEn": "alanine",
        "nameJa": "アラニン",
        "sideChainFormula": "-CH3",
        "sideChainFormulaTex": "\\ce{-CH3}"
      },
      "val": {
        "nameEnCap": "Valine",
        "nameEn": "valine",
        "nameJa": "バリン",
        "sideChainFormula": "-CH(CH3)2",
        "sideChainFormulaTex": "\\ce{-CH(CH3)2}"
      },
      "leu": {
        "nameEnCap": "Leucine",
        "nameEn": "leucine",
        "nameJa": "ロイシン",
        "sideChainFormula": "-CH2-CH(CH3)2",
        "sideChainFormulaTex": "\\ce{-CH2-CH(CH3)2}"
      },
      "ser": {
        "nameEnCap": "Serine",
        "nameEn": "serine",
        "nameJa": "セリン",
        "sideChainFormula": "-CH2OH",
        "sideChainFormulaTex": "\\ce{-CH2OH}"
      },
      "thr": {
        "nameEnCap": "Threonine",
        "nameEn": "threonine",
        "nameJa": "スレオニン",
        "sideChainFormula": "-CH(OH)CH3",
        "sideChainFormulaTex": "\\ce{-CH(OH)CH3}"
      },
      "phe": {
        "nameEnCap": "Phenylalanine",
        "nameEn": "phenylalanine",
        "nameJa": "フェニルアラニン",
        "sideChainFormula": "-CH2-Ph",
        "sideChainFormulaTex": "\\ce{-CH2-Ph}"
      },
      "tyr": {
        "nameEnCap": "Tyrosine",
        "nameEn": "tyrosine",
        "nameJa": "チロシン",
        "sideChainFormula": "-CH2-Ph-OH",
        "sideChainFormulaTex": "\\ce{-CH2-Ph-OH}"
      }
    }
  },
  "questionRules": {
    "patterns": [
      {
        "id": "p_rgroup_to_name_ruby_choice_tips",
        "label": "R group → amino acid name (with tips)",
        "tokens": [
          {
            "type": "text",
            "value": "Which amino acid has the following side chain (R group): "
          },
          {
            "type": "key",
            "field": "sideChainFormulaTex",
            "styles": ["katex"]
          },
          {
            "type": "text",
            "value": " ?"
          },
          {
            "type": "hideruby",
            "id": "answer_name",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "from": "entitySet",
                  "filter": "same_entity_type",
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_rgroup_name_always",
            "when": "always",
            "tokens": [
              {
                "type": "text",
                "value": "Remember: "
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              }
            ]
          },
          {
            "id": "t_rgroup_name_incorrect",
            "when": "incorrect",
            "tokens": [
              {
                "type": "text",
                "value": "The side chain is "
              },
              {
                "type": "key",
                "field": "sideChainFormulaTex",
                "styles": ["katex"]
              },
              {
                "type": "text",
                "value": ". Pay attention to the functional group when you memorize this amino acid."
              }
            ]
          }
        ]
      },
      {
        "id": "p_name_to_rgroup_ruby_choice_tips",
        "label": "Amino acid name → R group (with tips)",
        "tokens": [
          {
            "type": "text",
            "value": "Select the correct side chain (R group) for "
          },
          {
            "type": "ruby",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            }
          },
          {
            "type": "text",
            "value": "."
          },
          {
            "type": "hideruby",
            "id": "answer_rgroup",
            "base": {
              "source": "key",
              "field": "sideChainFormulaTex",
              "styles": ["katex"]
            },
            "ruby": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans"]
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "from": "entitySet",
                  "filter": "same_entity_type",
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_name_to_rgroup_correct",
            "when": "correct",
            "tokens": [
              {
                "type": "text",
                "value": "Nice! You selected the correct R group for "
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              },
              {
                "type": "text",
                "value": "."
              }
            ]
          }
        ]
      },
      {
        "id": "p_japanese_to_english_name_choice",
        "label": "Japanese name → English name (ruby choice)",
        "tokens": [
          {
            "type": "text",
            "value": "Which English amino acid name corresponds to "
          },
          {
            "type": "key",
            "field": "nameJa"
          },
          {
            "type": "text",
            "value": " ?"
          },
          {
            "type": "hideruby",
            "id": "answer_name_from_ja",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "from": "entitySet",
                  "filter": "same_entity_type",
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_ja_to_en_incorrect",
            "when": "incorrect",
            "tokens": [
              {
                "type": "text",
                "value": "Try to link the Japanese name "
              },
              {
                "type": "key",
                "field": "nameJa"
              },
              {
                "type": "text",
                "value": " to the first letter of the English name."
              }
            ]
          }
        ]
      },
      {
        "id": "p_fill_and_choice_combo",
        "label": "Fill side chain + choose name (demo)",
        "tokens": [
          {
            "type": "text",
            "value": "For the amino acid "
          },
          {
            "type": "ruby",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            }
          },
          {
            "type": "text",
            "value": ", the side chain (R group) is "
          },
          {
            "type": "hide",
            "id": "answer_sidechain",
            "field": "sideChainFormulaTex",
            "styles": ["katex"],
            "answer": {
              "mode": "fill_in_blank"
            }
          },
          {
            "type": "text",
            "value": ". Now select the correct amino acid name:"
          },
          {
            "type": "hideruby",
            "id": "answer_name_combo",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "from": "entitySet",
                  "filter": "same_entity_type",
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_combo_always",
            "when": "always",
            "tokens": [
              {
                "type": "text",
                "value": "Side chain: "
              },
              {
                "type": "key",
                "field": "sideChainFormulaTex",
                "styles": ["katex"]
              },
              {
                "type": "text",
                "value": " belongs to this amino acid: "
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              }
            ]
          }
        ]
      }
    ],
    "modes": [
      {
        "id": "demo_balanced",
        "label": "Demo: mixed patterns",
        "description": "Use all patterns with balanced weights.",
        "patternWeights": [
          { "patternId": "p_rgroup_to_name_ruby_choice_tips", "weight": 3 },
          { "patternId": "p_name_to_rgroup_ruby_choice_tips", "weight": 3 },
          { "patternId": "p_japanese_to_english_name_choice", "weight": 2 },
          { "patternId": "p_fill_and_choice_combo", "weight": 2 }
        ]
      },
      {
        "id": "rgroup_focus",
        "label": "R-group focused",
        "description": "More questions asking from side chain to name.",
        "patternWeights": [
          { "patternId": "p_rgroup_to_name_ruby_choice_tips", "weight": 7 },
          { "patternId": "p_fill_and_choice_combo", "weight": 3 }
        ]
      },
      {
        "id": "name_focus",
        "label": "Name-focused",
        "description": "More questions about names and Japanese-English correspondence.",
        "patternWeights": [
          { "patternId": "p_name_to_rgroup_ruby_choice_tips", "weight": 4 },
          { "patternId": "p_japanese_to_english_name_choice", "weight": 6 }
        ]
      }
    ]
  }
}
