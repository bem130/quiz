{
    "title": "Alpha Amino Acid Quiz (demo with tips)",
    "description": "Demo quiz to test patterns, tips, and multiple question types for alpha amino acids.",
    "version": 2,
    "imports": ["./alpha-amino-acid-quiz-v2.data.json"],
    "questionRules": {
        "patterns": [
            {
                "id": "p_rgroup_to_name_ruby_choice_tips",
                "label": "R group → amino acid name (with tips)",
                "dataSet": "alpha-amino-acids",
                "tokens": [
                    { "type": "text", "value": "Which amino acid has the following side chain (R group): " },
                    { "type": "katex", "field": "sideChainFormulaTex" },
                    { "type": "text", "value": " ?" },
                    {
                        "type": "hide",
                        "id": "answer_name",
                        "value": {
                            "type": "ruby",
                            "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                            "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ],
                "tips": [
                    {
                        "id": "t_rgroup_name_always",
                        "when": "always",
                        "tokens": [
                            { "type": "text", "value": "Remember: " },
                            {
                                "type": "ruby",
                                "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                                "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                            }
                        ]
                    },
                    {
                        "id": "t_rgroup_name_incorrect",
                        "when": "incorrect",
                        "tokens": [
                            { "type": "text", "value": "The side chain is " },
                            { "type": "katex", "field": "sideChainFormulaTex" },
                            { "type": "text", "value": ". Pay attention to the functional group when you memorize this amino acid." }
                        ]
                    }
                ]
            },
            {
                "id": "p_name_to_rgroup_ruby_choice_tips",
                "label": "Amino acid name → R group (with tips)",
                "dataSet": "alpha-amino-acids",
                "tokens": [
                    { "type": "text", "value": "Select the correct side chain (R group) for " },
                    {
                        "type": "ruby",
                        "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                        "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                    },
                    { "type": "text", "value": "." },
                    {
                        "type": "hide",
                        "id": "answer_rgroup",
                        "value": {
                            "type": "ruby",
                            "base": { "source": "key", "field": "sideChainFormulaTex", "styles": ["katex"] },
                            "ruby": { "source": "key", "field": "nameEnCap", "styles": ["sans"] }
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ],
                "tips": [
                    {
                        "id": "t_name_to_rgroup_correct",
                        "when": "correct",
                        "tokens": [
                            { "type": "text", "value": "Nice! You selected the correct R group for " },
                            {
                                "type": "ruby",
                                "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                                "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                            },
                            { "type": "text", "value": "." }
                        ]
                    }
                ]
            },
            {
                "id": "p_japanese_to_english_name_choice",
                "label": "Japanese name → English name (ruby choice)",
                "dataSet": "alpha-amino-acids",
                "tokens": [
                    { "type": "text", "value": "Which English amino acid name corresponds to " },
                    { "type": "key", "field": "nameJa" },
                    { "type": "text", "value": " ?" },
                    {
                        "type": "hide",
                        "id": "answer_name_from_ja",
                        "value": {
                            "type": "ruby",
                            "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                            "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ],
                "tips": [
                    {
                        "id": "t_ja_to_en_incorrect",
                        "when": "incorrect",
                        "tokens": [
                            { "type": "text", "value": "Try to link the Japanese name " },
                            { "type": "key", "field": "nameJa" },
                            { "type": "text", "value": " to the first letter of the English name." }
                        ]
                    }
                ]
            },
            {
                "id": "p_fill_and_choice_combo",
                "label": "Fill side chain + choose name (demo)",
                "dataSet": "alpha-amino-acids",
                "tokens": [
                    { "type": "text", "value": "For the amino acid " },
                    {
                        "type": "ruby",
                        "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                        "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                    },
                    { "type": "text", "value": ", the side chain (R group) is " },
                    {
                        "type": "hide",
                        "id": "answer_sidechain",
                        "value": { "type": "katex", "field": "sideChainFormulaTex" },
                        "answer": {
                            "mode": "choice_from_entities",
                            "choice": {
                                "distractorSource": { "count": 3, "avoidSameId": true, "avoidSameText": true }
                            }
                        }
                    },
                    { "type": "text", "value": ". Now select the correct amino acid name:" },
                    {
                        "type": "hide",
                        "id": "answer_name_combo",
                        "value": {
                            "type": "ruby",
                            "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                            "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ],
                "tips": [
                    {
                        "id": "t_combo_always",
                        "when": "always",
                        "tokens": [
                            { "type": "text", "value": "Side chain: " },
                            { "type": "katex", "field": "sideChainFormulaTex" },
                            { "type": "text", "value": " belongs to this amino acid: " },
                            {
                                "type": "ruby",
                                "base": { "source": "key", "field": "nameEnCap", "styles": ["sans", "bold"] },
                                "ruby": { "source": "key", "field": "nameJa", "styles": ["sans"] }
                            }
                        ]
                    }
                ]
            },
            {
                "id": "p_sentence_fill_choice",
                "label": "Sentence-based fill choices",
                "dataSet": "alpha-sentences",
                "tokensFromData": "sentences",
                "questionFormat": "sentence_fill_choice",
                "tips": []
            }
        ],
        "modes": [
            {
                "id": "demo_balanced",
                "label": "Demo: mixed patterns",
                "description": "Use all patterns with balanced weights.",
                "patternWeights": [
                    { "patternId": "p_rgroup_to_name_ruby_choice_tips", "weight": 3 },
                    { "patternId": "p_name_to_rgroup_ruby_choice_tips", "weight": 3 },
                    { "patternId": "p_japanese_to_english_name_choice", "weight": 2 },
                    { "patternId": "p_fill_and_choice_combo", "weight": 2 },
                    { "patternId": "p_sentence_fill_choice", "weight": 2 }
                ]
            },
            {
                "id": "rgroup_focus",
                "label": "R-group focused",
                "description": "More questions asking from side chain to name.",
                "patternWeights": [
                    { "patternId": "p_rgroup_to_name_ruby_choice_tips", "weight": 7 },
                    { "patternId": "p_fill_and_choice_combo", "weight": 3 }
                ]
            },
            {
                "id": "name_focus",
                "label": "Name-focused",
                "description": "More questions about names and Japanese-English correspondence.",
                "patternWeights": [
                    { "patternId": "p_name_to_rgroup_ruby_choice_tips", "weight": 4 },
                    { "patternId": "p_japanese_to_english_name_choice", "weight": 6 },
                    { "patternId": "p_sentence_fill_choice", "weight": 2 }
                ]
            }
        ]
    }
}
