{
  "title": "アミノ酸クイズ",
  "description": "20種類のαアミノ酸について、構造・略号・分類・理論（双性イオン、等電点、電離、ペプチド結合など）を日本語で学習するためのクイズ問題ファイル。",
  "version": 2,
  "imports": ["./amino-acid-quiz-ja-v2.data.json"],
  "questionRules": {
    "patterns": [
      {
        "id": "p_rgroup_to_name_ja_tips",
        "label": "R基 → アミノ酸名（日本語4択＋tips＋語源）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "側鎖（R基）が "
          },
          {
            "type": "katex",
            "field": "sideChainFormulaTex"
          },
          {
            "type": "text",
            "value": " であるアミノ酸として正しいものを 1 つ選べ。"
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_name_en_ja",
            "value": {
              "type": "ruby",
              "base": {
                "source": "key",
                "field": "nameEnCap",
                "styles": ["sans", "bold"]
              },
              "ruby": {
                "source": "key",
                "field": "nameJa",
                "styles": ["sans"]
              }
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_rgroup_name_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【分類】このアミノ酸は "
              },
              {
                "type": "key",
                "field": "classJa"
              },
              {
                "type": "text",
                "value": " に分類される。"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【特徴】"
              },
              {
                "type": "key",
                "field": "descJa"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【語源メモ】"
              },
              {
                "type": "key",
                "field": "etymologyJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_name_to_rgroup_ja_tips",
        "label": "アミノ酸名 → R基（日本語4択＋tips＋語源）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "次のアミノ酸の側鎖（R基）として正しいものを 1 つ選べ："
          },
          {
            "type": "ruby",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            }
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_rgroup",
            "value": {
              "type": "katex",
              "field": "sideChainFormulaTex"
            },
            "answer": {
              "mode": "choice_katex",
              "choice": {
                "distractorSource": {
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_name_to_rgroup_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【解説】"
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              },
              {
                "type": "text",
                "value": " の側鎖は "
              },
              {
                "type": "katex",
                "field": "sideChainFormulaTex"
              },
              {
                "type": "text",
                "value": " であり、分類は "
              },
              {
                "type": "key",
                "field": "classJa"
              },
              {
                "type": "text",
                "value": " に属する。"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【語源メモ】"
              },
              {
                "type": "key",
                "field": "etymologyJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_smiles_to_name_ja",
        "label": "SMILES → アミノ酸名（構造式表示）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "次のSMILESで表されるアミノ酸を選べ："
          },
          {
            "type": "br"
          },
          {
            "type": "smiles",
            "field": "smilesFull"
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_name_smiles",
            "value": {
              "type": "ruby",
              "base": {
                "source": "key",
                "field": "nameEnCap",
                "styles": ["sans", "bold"]
              },
              "ruby": {
                "source": "key",
                "field": "nameJa",
                "styles": ["sans"]
              }
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_smiles_to_name_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【SMILES】"
              },
              {
                "type": "smiles",
                "field": "smilesFull"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【側鎖SMILES】"
              },
              {
                "type": "smiles",
                "field": "smilesSide"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【分類】"
              },
              {
                "type": "key",
                "field": "classJa"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【特徴】"
              },
              {
                "type": "key",
                "field": "descJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_name_to_code3_ja_tips",
        "label": "アミノ酸名 → 3文字略号（日本語4択＋tips＋語源）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "アミノ酸 "
          },
          {
            "type": "ruby",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            }
          },
          {
            "type": "text",
            "value": " の 3 文字略号として正しいものを 1 つ選べ。"
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_code3",
            "value": {
              "type": "key",
              "field": "code3"
            },
            "answer": {
              "mode": "choice_from_entities",
              "choice": {
                "distractorSource": {
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_name_to_code3_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【確認】"
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              },
              {
                "type": "text",
                "value": " の 3 文字略号は "
              },
              {
                "type": "key",
                "field": "code3"
              },
              {
                "type": "text",
                "value": " である。"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【語源メモ】"
              },
              {
                "type": "key",
                "field": "etymologyJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_code3_to_name_ja_tips",
        "label": "3文字略号 → アミノ酸名（日本語4択＋tips＋語源）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "3 文字略号 \""
          },
          {
            "type": "key",
            "field": "code3"
          },
          {
            "type": "text",
            "value": "\" を持つアミノ酸として正しいものを 1 つ選べ。"
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_name_from_code3",
            "value": {
              "type": "ruby",
              "base": {
                "source": "key",
                "field": "nameEnCap",
                "styles": ["sans", "bold"]
              },
              "ruby": {
                "source": "key",
                "field": "nameJa",
                "styles": ["sans"]
              }
            },
            "answer": {
              "mode": "choice_ruby_pair",
              "choice": {
                "distractorSource": {
                  "count": 3,
                  "avoidSameId": true,
                  "avoidSameText": true
                }
              }
            }
          }
        ],
        "tips": [
          {
            "id": "t_code3_to_name_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【確認】略号と名前の対応："
              },
              {
                "type": "key",
                "field": "code3"
              },
              {
                "type": "text",
                "value": " → "
              },
              {
                "type": "ruby",
                "base": {
                  "source": "key",
                  "field": "nameEnCap",
                  "styles": ["sans", "bold"]
                },
                "ruby": {
                  "source": "key",
                  "field": "nameJa",
                  "styles": ["sans"]
                }
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【語源メモ】"
              },
              {
                "type": "key",
                "field": "etymologyJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_name_to_class_ja_tips",
        "label": "アミノ酸名 → 側鎖の性質（分類）（日本語4択＋tips＋語源）",
        "questionFormat": "table_fill_choice",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "アミノ酸 "
          },
          {
            "type": "ruby",
            "base": {
              "source": "key",
              "field": "nameEnCap",
              "styles": ["sans", "bold"]
            },
            "ruby": {
              "source": "key",
              "field": "nameJa",
              "styles": ["sans"]
            }
          },
          {
            "type": "text",
            "value": " の側鎖の性質として正しいものを 1 つ選べ。"
          },
          {
            "type": "br"
          },
          {
            "type": "hide",
            "id": "answer_class",
            "value": {
              "type": "text",
              "field": "classJa"
            },
            "answer": {
              "mode": "choice_from_group",
              "group": "classJaGroup"
            }
          }
        ],
        "tips": [
          {
            "id": "t_name_to_class_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【分類のポイント】"
              },
              {
                "type": "key",
                "field": "classJa"
              },
              {
                "type": "text",
                "value": " に分類されるアミノ酸は、側鎖が "
              },
              {
                "type": "key",
                "field": "classHintJa"
              },
              {
                "type": "text",
                "value": " という特徴を持つ。"
              },
              {
                "type": "br"
              },
              {
                "type": "text",
                "value": "【語源メモ】"
              },
              {
                "type": "key",
                "field": "etymologyJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_match_name_class_ja",
        "label": "マッチング：アミノ酸名 ↔ 分類（日本語）",
        "questionFormat": "table_matching",
        "dataSet": "alpha-amino-acids",
        "entityFilter": {
          "in": {
            "field": "classJa",
            "values": ["酸性", "塩基性", "極性（中性）", "非極性"]
          }
        },
        "tokens": [
          {
            "type": "text",
            "value": "アミノ酸の名前（左）と、側鎖の性質による分類（右）を対応付けよ。"
          }
        ],
        "matchingSpec": {
          "mode": "matching_pairs_from_entities",
          "leftField": "nameJa",
          "rightField": "classJa",
          "pairCount": 4,
          "shuffleRight": true
        },
        "tips": [
          {
            "id": "t_match_name_class_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【復習】非極性・極性・酸性・塩基性アミノ酸をグループごとにイメージして覚えよう。"
              }
            ]
          }
        ]
      },
      {
        "id": "p_match_name_rgroup_ja",
        "label": "マッチング：アミノ酸名 ↔ R基（日本語）",
        "questionFormat": "table_matching",
        "dataSet": "alpha-amino-acids",
        "tokens": [
          {
            "type": "text",
            "value": "アミノ酸の名前（左）と、側鎖（R基）の構造式（右）を対応付けよ。"
          }
        ],
        "matchingSpec": {
          "mode": "matching_pairs_from_entities",
          "leftField": "nameJa",
          "rightField": "sideChainFormulaTex",
          "pairCount": 4,
          "shuffleRight": true
        },
        "tips": [
          {
            "id": "t_match_name_rgroup_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【コツ】R基の大まかな形（直鎖・分岐・芳香環・含硫黄など）に注目すると対応付けしやすい。"
              }
            ]
          }
        ]
      },
      {
        "id": "p_sentence_definitions_ja",
        "label": "sentence：定義・用語（日本語穴埋め＋解説）",
        "questionFormat": "sentence_fill_choice",
        "dataSet": "amino-sentences-def-ja",
        "tokensFromData": "sentences",
        "tips": [
          {
            "id": "t_sentence_def_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【解説】"
              },
              {
                "type": "key",
                "field": "explainJa"
              }
            ]
          }
        ]
      },
      {
        "id": "p_sentence_theory_ja",
        "label": "sentence：理論・電離・等電点（日本語穴埋め＋解説）",
        "questionFormat": "sentence_fill_choice",
        "dataSet": "amino-sentences-theory-ja",
        "tokensFromData": "sentences",
        "tips": [
          {
            "id": "t_sentence_theory_always",
            "when": "after_answer",
            "tokens": [
              {
                "type": "text",
                "value": "【解説】"
              },
              {
                "type": "key",
                "field": "explainJa"
              }
            ]
          }
        ]
      }
    ],
    "modes": [
      {
        "id": "ja_basic_rgroup_name_all",
        "label": "日本語：基本 R基 ↔ 名前（全アミノ酸）",
        "description": "20種類すべてのアミノ酸について、R基と名前の対応を日本語で確認する基礎モード。",
        "patternWeights": [
          {
            "patternId": "p_rgroup_to_name_ja_tips",
            "weight": 5
          },
          {
            "patternId": "p_name_to_rgroup_ja_tips",
            "weight": 5
          }
        ]
      },
      {
        "id": "ja_smiles_structure_all",
        "label": "日本語：SMILES構造識別",
        "description": "SMILES で示された構造式からアミノ酸名を特定する練習モード。",
        "patternWeights": [
          {
            "patternId": "p_smiles_to_name_ja",
            "weight": 10
          }
        ]
      },
      {
        "id": "ja_basic_code_all",
        "label": "日本語：3文字略号 ↔ 名前（全アミノ酸）",
        "description": "20種類すべてのアミノ酸について、3文字略号と名前の対応を確認するモード。",
        "patternWeights": [
          {
            "patternId": "p_name_to_code3_ja_tips",
            "weight": 5
          },
          {
            "patternId": "p_code3_to_name_ja_tips",
            "weight": 5
          }
        ]
      },
      {
        "id": "ja_classification_focus",
        "label": "日本語：分類集中（非極性・極性・酸性・塩基性）",
        "description": "側鎖の性質による分類（非極性・極性（中性）・酸性・塩基性）に集中して練習するモード。",
        "patternWeights": [
          {
            "patternId": "p_name_to_class_ja_tips",
            "weight": 6
          },
          {
            "patternId": "p_match_name_class_ja",
            "weight": 4
          }
        ]
      },
      {
        "id": "ja_sentence_def_theory_mix",
        "label": "日本語：定義＋理論（sentence型）",
        "description": "アミノ酸・αアミノ酸・ペプチド・ペプチド結合・双性イオン・等電点・ニンヒドリン反応などの定義と、pH・電離・等電点の理論を文章穴埋めで確認するモード。",
        "patternWeights": [
          {
            "patternId": "p_sentence_definitions_ja",
            "weight": 5
          },
          {
            "patternId": "p_sentence_theory_ja",
            "weight": 5
          }
        ]
      },
      {
        "id": "ja_mixed_exam_all",
        "label": "日本語：総合ミックス（試験対策）",
        "description": "構造、略号、分類、定義、理論をバランスよく混ぜた総合演習モード。",
        "patternWeights": [
          {
            "patternId": "p_rgroup_to_name_ja_tips",
            "weight": 3
          },
          {
            "patternId": "p_name_to_rgroup_ja_tips",
            "weight": 3
          },
          {
            "patternId": "p_smiles_to_name_ja",
            "weight": 2
          },
          {
            "patternId": "p_name_to_code3_ja_tips",
            "weight": 2
          },
          {
            "patternId": "p_code3_to_name_ja_tips",
            "weight": 2
          },
          {
            "patternId": "p_name_to_class_ja_tips",
            "weight": 3
          },
          {
            "patternId": "p_match_name_class_ja",
            "weight": 2
          },
          {
            "patternId": "p_match_name_rgroup_ja",
            "weight": 2
          },
          {
            "patternId": "p_sentence_definitions_ja",
            "weight": 3
          },
          {
            "patternId": "p_sentence_theory_ja",
            "weight": 3
          }
        ]
      },
      {
        "id": "ja_quick_check",
        "label": "日本語：ショートチェック（5問想定）",
        "description": "5問程度で、名前・R基・略号・分類・定義を軽く一通り確認するショートテストモード。",
        "patternWeights": [
          {
            "patternId": "p_rgroup_to_name_ja_tips",
            "weight": 2
          },
          {
            "patternId": "p_name_to_rgroup_ja_tips",
            "weight": 2
          },
          {
            "patternId": "p_smiles_to_name_ja",
            "weight": 1
          },
          {
            "patternId": "p_name_to_code3_ja_tips",
            "weight": 1
          },
          {
            "patternId": "p_name_to_class_ja_tips",
            "weight": 1
          },
          {
            "patternId": "p_sentence_definitions_ja",
            "weight": 1
          }
        ]
      }
    ]
  }
}
