{
    "id": "alpha-amino-acid-quiz-v1",
    "title": "Alpha Amino Acid Quiz",
    "description": "Quiz to learn the correspondence between amino acid names and side chains",
    "version": 1,
    "color": 130,
    "entitySet": {
        "id": "alpha-amino-acids",
        "entities": {
            "gly": {
                "nameEnCap": "Glycine",
                "nameEn": "glycine",
                "nameJa": "グリシン",
                "sideChainFormula": "-H",
                "sideChainFormulaTex": "\\ce{-H}"
            },
            "ala": {
                "nameEnCap": "Alanine",
                "nameEn": "alanine",
                "nameJa": "アラニン",
                "sideChainFormula": "-CH3",
                "sideChainFormulaTex": "\\ce{-CH3}"
            },
            "val": {
                "nameEnCap": "Valine",
                "nameEn": "valine",
                "nameJa": "バリン",
                "sideChainFormula": "-CH(CH3)2",
                "sideChainFormulaTex": "\\ce{-CH(CH3)2}"
            },
            "leu": {
                "nameEnCap": "Leucine",
                "nameEn": "leucine",
                "nameJa": "ロイシン",
                "sideChainFormula": "-CH2-CH(CH3)2",
                "sideChainFormulaTex": "\\ce{-CH2-CH(CH3)2}"
            },
            "ser": {
                "nameEnCap": "Serine",
                "nameEn": "serine",
                "nameJa": "セリン",
                "sideChainFormula": "-CH2OH",
                "sideChainFormulaTex": "\\ce{-CH2OH}"
            },
            "thr": {
                "nameEnCap": "Threonine",
                "nameEn": "threonine",
                "nameJa": "スレオニン",
                "sideChainFormula": "-CH(OH)CH3",
                "sideChainFormulaTex": "\\ce{-CH(OH)CH3}"
            },
            "phe": {
                "nameEnCap": "Phenylalanine",
                "nameEn": "phenylalanine",
                "nameJa": "フェニルアラニン",
                "sideChainFormula": "-CH2-Ph",
                "sideChainFormulaTex": "\\ce{-CH2-Ph}"
            },
            "tyr": {
                "nameEnCap": "Tyrosine",
                "nameEn": "tyrosine",
                "nameJa": "チロシン",
                "sideChainFormula": "-CH2-Ph-OH",
                "sideChainFormulaTex": "\\ce{-CH2-Ph-OH}"
            }
        }
    },
    "questionRules": {
        "patterns": [
            {
                "id": "p_rgroup_to_name_ruby_choice",
                "label": "R group → amino acid name (ruby choice)",
                "tokens": [
                    {
                        "type": "text",
                        "value": "Which amino acid has the following side chain (R group): "
                    },
                    {
                        "type": "key",
                        "field": "sideChainFormulaTex",
                        "styles": ["katex"]
                    },
                    {
                        "type": "text",
                        "value": " ?"
                    },
                    {
                        "type": "hideruby",
                        "id": "answer_name",
                        "base": {
                            "source": "key",
                            "field": "nameEnCap",
                            "styles": ["sans", "bold"]
                        },
                        "ruby": {
                            "source": "key",
                            "field": "nameJa",
                            "styles": ["sans"]
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "from": "entitySet",
                                    "filter": "same_entity_type",
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ]
            },
            {
                "id": "p_name_to_rgroup_choice",
                "label": "Amino acid name → R group (ruby choice)",
                "tokens": [
                    {
                        "type": "text",
                        "value": "Select the correct side chain (R group) for "
                    },
                    {
                        "type": "ruby",
                        "base": {
                            "source": "key",
                            "field": "nameEnCap",
                            "styles": ["sans", "bold"]
                        },
                        "ruby": {
                            "source": "key",
                            "field": "nameJa",
                            "styles": ["sans"]
                        }
                    },
                    {
                        "type": "text",
                        "value": "."
                    },
                    {
                        "type": "hideruby",
                        "id": "answer_rgroup",
                        "base": {
                            "source": "key",
                            "field": "sideChainFormulaTex",
                            "styles": ["katex"]
                        },
                        "ruby": {
                            "source": "key",
                            "field": "nameEnCap",
                            "styles": ["sans"]
                        },
                        "answer": {
                            "mode": "choice_ruby_pair",
                            "choice": {
                                "distractorSource": {
                                    "from": "entitySet",
                                    "filter": "same_entity_type",
                                    "count": 3,
                                    "avoidSameId": true,
                                    "avoidSameText": true
                                }
                            }
                        }
                    }
                ]
            }
        ],
        "modes": [
            {
                "id": "default",
                "label": "Default mix",
                "description": "50% R group → name, 50% name → R group",
                "patternWeights": [
                    {
                        "patternId": "p_rgroup_to_name_ruby_choice",
                        "weight": 5
                    },
                    {
                        "patternId": "p_name_to_rgroup_choice",
                        "weight": 5
                    }
                ]
            },
            {
                "id": "rgroup_focus",
                "label": "R-group focused",
                "description": "More questions asking from R group to name",
                "patternWeights": [
                    {
                        "patternId": "p_rgroup_to_name_ruby_choice",
                        "weight": 8
                    },
                    {
                        "patternId": "p_name_to_rgroup_choice",
                        "weight": 2
                    }
                ]
            }
        ]
    }
}
