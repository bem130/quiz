# クイズ問題ファイル作成指針（汎用版＋mode設計）

アミノ酸クイズの設計を通して固めた方針を、
**他のテーマ（theme）にもそのまま使える「設計ガイド」として一般化**したものです。

* 特定テーマの例（アミノ酸・ペプチドなど）はあくまで「例」
* どんな分野（物理・生物・歴史・英単語…）でも同じ考え方で設計できるように整理します

---

## 1. 全体設計の基本方針

### 1-1. 「データ」と「出題ロジック」を分ける

1. **データ側（Data Bundle / dataSets）**

   * そのテーマの「事実・一覧・表」をまとめる場所
   * 例：

     * アミノ酸一覧（名前・記号・分類・性質…）
     * 元素一覧（名称・記号・原子番号・族…）
     * 英単語帳（単語・意味・品詞・例文…）

2. **問題側（Main Quiz File / questionRules）**

   * 「どのデータを、どんな形式で問題にするか」を決める場所
   * 例：

     * 表から 4択穴埋め問題を作る
     * 定義文の空欄を埋めさせる
     * 左右をマッチングさせる

**原則：**

* 新しいテーマを作るときは

1. まず「データの一覧」を作る
2. 次に「そのデータをどう問うか（パターン）」を設計する
   という順番で進める。

---

## 2. 問題タイプの大分類

この指針では、問題を大きく 2 つに分けて考える：

1. **table型**

   * データ表（table）から自動的に多数の問題を生成するタイプ
   * 代表：`table_fill_choice`, `table_matching`

2. **sentence型**

   * 1問ずつ、文章を設計しておくタイプ
   * 代表：`sentence_fill_choice`（穴埋め・質問形式）

**方針：**

* **table型** → 「広い範囲をたくさん問う」ための量産型
* **sentence型** → 「重要概念・定義・考え方」を丁寧に問うための手作り型

両方を組み合わせて、
**「幅広さ（table）」＋「深さ（sentence）」**を両立させる。

---

## 3. sentence型：設計方針とパターン

### 3-1. sentence型の役割

* **役割：**

  * 重要概念・定義・条件付き説明など
  * 「文章として覚えてほしい知識」を直接問う

* **方針：**

  * **1トピックにつき複数パターン**の文章を用意する
  * **2つの基本スタイル**を必ず両方作る：

    1. 定義穴埋め型

       * 「〜とは ___ と ___ を持つ（示す）___である」
    2. 質問形式型

       * 「…であるのは何か？ ___」
       * 「…を何というか？ ___」

### 3-2. 定義穴埋め型（コアスタイル）

* 汎用フォーマット：

  > 「〇〇とは **___** と **___** を持つ（示す） **___** である。」

* 例（テーマ：アミノ酸）

  * 「アミノ酸とは、分子内に **アミノ基** と **カルボキシル基** を持つ **有機化合物** である。」

* 他テーマ例（テーマ：元素）

  * 「アルカリ金属とは、周期表の **第1族** に属し、**1価の陽イオン** をつくりやすい **金属元素** である。」

この形式を、**テーマごとの重要用語（例：α-アミノ酸、ペプチド結合、双性イオン、等電点…）に対して必ず用意する。**

### 3-3. 質問形式型（問いかけスタイル）

* 汎用フォーマット例：

  * 「**…であるのは何か？　___**」
  * 「**…を何というか？　___**」
  * 「**次の説明に当てはまる用語として正しいものを 1 つ選べ。___**」

* 例（テーマ：アミノ酸）

  * 「分子内にアミノ基とカルボキシル基を同時に持つ有機化合物を何というか。 **___**」
  * 「“アミノ酸のカルボキシル基とアミノ基が脱水縮合してできるアミド結合” を何と呼ぶか。 **___**」

* 他テーマ例（テーマ：波動）

  * 「1 秒間に繰り返される振動の回数を何というか。 **___**」

### 3-4. 同じトピックに「複数パターン」を用意する

**原則：1トピックにつき、最低 2〜3 文の異なる聞き方を用意する。**

例（トピック：ペプチド結合）

1. 定義穴埋め1

   * 「ペプチド結合とは、アミノ酸の **___** と **___** が脱水縮合してできる **___** である。」
2. 定義穴埋め2（視点変更）

   * 「ペプチド結合とは、タンパク質の一次構造を支える **___** と **___** の間の **___** である。」
3. 質問形式

   * 「アミノ酸同士をつなぐアミド結合を何というか。 **___**」

同じ用語でも、

* 「何と何が結合するか」
* 「何の構造を支えるのか」
* 「用語名を問う」
  など、**視点を変えた文章**を用意しておく。

### 3-5. sentence型で扱う主なテーマの例

（アミノ酸を例にしたが、他テーマでも同じ構造で設計できる）

* **定義系**

  * アミノ酸 / α-アミノ酸 / ペプチド / ペプチド結合
  * 双性イオン / 等電点
  * 特定の装置や法則など（他テーマ）

* **性質・条件系**

  * pH と電離状態（酸性側・塩基性側）
  * 温度条件・圧力条件（物理・化学など）
  * 規則・法則が成立する条件

* **構造・末端系**

  * N末端 / C末端
  * ベクトルの向き、座標系の向き
  * 列挙の慣習（左から右、上から下…）

---

## 4. table型：設計方針とパターン

### 4-1. table型の役割

* **役割：**

  * データ表から「大量の組み合わせ」を自動生成して、**網羅的な練習をさせる**。
  * 例：

    * R基 ↔ アミノ酸名
    * アミノ酸名 ↔ 3文字略号
    * アミノ酸名 ↔ 性質（酸性・塩基性・極性・非極性）

* **設計方針：**

  * 1つの表（DataSet）に、できるだけ「多くのフィールド」を整理して入れる
    → `name`, `code`, `class`, `property`, `example` など
  * それぞれのフィールドを、

    * 「問題文の表示に使う」
    * 「穴埋めの正解に使う」
    * 「選択肢の候補に使う」
      として再利用する。

### 4-2. table_fill_choice（穴埋め 4択）

**典型パターン：**

1. **属性 → 名前**

   * 「側鎖に -CH(CH₃)₂ を持つアミノ酸は **___** である。」
   * 「3文字略号『Tyr』を持つアミノ酸は **___** である。」

2. **名前 → 属性**

   * 「フェニルアラニンの側鎖（R基）は **___** である。」
   * 「アラニンの 3文字略号は **___** である。」
   * 「アスパラギン酸の側鎖の性質として正しいものは **___** である。」

**他テーマへの一般化例：**

* 元素

  * 「原子番号 17 の元素は **___** である。」
  * 「塩素（Chlorine）の元素記号は **___** である。」

* 英単語

  * 「“apple” の意味として最も適切なものは **___** である。」
  * 「『りんご』を意味する英単語は **___** である。」

### 4-3. table_matching（マッチング）

**典型パターン：**

1. 名前 ↔ 属性

   * 左：名前のリスト
   * 右：R基 / 性質 / 3文字略号などのリスト
   * 例：

     * 「次のアミノ酸名（左）と側鎖（右）を正しく対応付けよ。」

2. 他テーマ例：

   * 元素名 ↔ 元素記号
   * 国名 ↔ 首都
   * 単語 ↔ 品詞 / 意味

**方針：**

* 1 問につき 4〜6 ペア程度にして、**混乱しすぎない範囲で多くの対応を問う**。
* 「table_fill_choice で個別に聞いた内容」を、最後にマッチングで総復習させるイメージ。

---

## 5. バリエーション設計のコツ（sentence と table の役割分担）

1. **table型**

   * 自動生成が得意 →「量」を稼ぐ
   * 1つの概念を違うフィールドの組み合わせで何度も問える
     （R基 → 名前 / 名前 → R基 / 名前 → 略号 / 略号 → 名前 …）

2. **sentence型**

   * 手作りが必要 →「質」を担保する
   * 同じ概念を

     * 定義穴埋め
     * 質問形式
     * 条件付きの説明文
       など、**言い回しを変えて複数用意**する。

3. **理想的な流れ（学習者視点）：**

   * **sentence型**で「概念の意味」を理解させ
   * **table型**で「個別のデータをたくさん覚えさせ」
   * **マッチング**で「全体の対応関係を整理させる」

---

## 6. 新しいテーマに適用するときのチェックリスト

1. **テーマのコア概念を洗い出す**

   * 「これだけは定義として覚えてほしい」用語一覧を作る
   * 例：○○定理、○○法則、○○反応、○○構造…

2. **table型に向いている「一覧データ」を決める**

   * 名称 / 記号 / 番号 / 分類 / 性質 / 例 など
   * これを 1つの DataSet（表）としてまとめる

3. **sentence型：各コア概念ごとに最低 2〜3 文を作る**

   * 「〜とは ___ と ___ を持つ（示す）___である」型（定義穴埋め）
   * 「…であるのは何か？ ___」型（質問形式）
   * 必要に応じて条件付きの文（pH, 温度, 状態など）

4. **table型：表から生成する問題パターンを決める**

   * 属性 → 名称
   * 名称 → 属性
   * 名称 ↔ 記号
   * 名称 ↔ 分類
   * などを、穴埋め 4択として設計

5. **マッチング問題を用意する**

   * 「個別問題で聞いた対応を、まとめて整理させる」用途で作る

6. **難易度・バランスの調整**

   * sentence型（定義・概念）：基礎〜標準レベル
   * table型（データ暗記）：標準〜演習レベル
   * 難しい概念には必ず sentence型の優しい説明パターンも用意する

---

## 7. mode設計：出題プリセットとして考える

ここからは、**mode（出題モード）** の設計指針をまとめる。

mode は、

* どの問題タイプを
* どのくらいの比率で
* どの範囲のデータ（フィルタ）から

出すかをまとめた「出題プリセット」として考える。

### 7-1. mode設計の基本ステップ

1. **学習目標を 1 行で決める**

   例：

   * 「用語の定義とイメージを固める基礎モード」
   * 「アミノ酸 20 種の暗記を回しまくるモード」
   * 「等電点・電離・双性イオンなど理論に集中するモード」
   * 「試験を想定した総合ミックスモード」

2. **1 セッションあたりの問題数を決める**

   例：

   * 5問：超短時間チェック
   * 10問：軽めの練習
   * 20問：がっつり演習

3. **問題タイプごとの比率を決める**

   この指針では、問題タイプを便宜的に次の4つに分類しておく：

   * **S-Def**：sentence 定義穴埋め

     * 「〜とは ___ と ___ を持つ（示す）___である」
   * **S-Q**：sentence 質問形式

     * 「…であるのは何か？ ___」「…を何というか？ ___」
   * **T-FC**：table_fill_choice（表データを使った穴埋め4択）
   * **T-M**：table_matching（マッチング）

   mode ごとに、

   * S-Def / S-Q / T-FC / T-M を何問ずつ出すか

   を決める。

4. **難易度の方向性を決める**

   * 易しめ / 普通 / やや難しい のどれを狙うか
   * 空欄の数、選択肢の紛らわしさ、扱う内容の抽象度で調整する。

5. **フィルタ条件（出題範囲）を決める**

   * 「必須アミノ酸だけ」
   * 「芳香族アミノ酸だけ」
   * 「力学分野だけ」

   といった条件を、table / sentence 両方に設定する。

### 7-2. modeの典型パターン例

以下は、合計 10 問の mode を例にした典型構成。

#### (1) 基礎用語モード（definitions_basic）

* **目的**：重要用語の定義とイメージを固める
* **構成例（10問）**

  * S-Def：6問
  * S-Q：2問
  * T-FC：2問
  * T-M：0問
* **フィルタ例**：

  * sentence：`category = "definition"`
  * table：フィルタなし、または基礎的なデータのみ

#### (2) データ暗記モード（table_drill）

* **目的**：一覧データ（名称・記号・分類など）を集中的に暗記
* **構成例（10問）**

  * S-Def：1問
  * S-Q：1問
  * T-FC：6〜7問
  * T-M：1〜2問
* **フィルタ例**：

  * table：全データからランダム
  * sentence：基礎レベルの定義を少数混ぜる

#### (3) 理論集中モード（theory_focus）

* **目的**：電離・等電点・双性イオン・反応などの理論に集中
* **構成例（10問）**

  * S-Def：4問
  * S-Q：4問
  * T-FC：1〜2問
  * T-M：0〜1問
* **フィルタ例**：

  * sentence：`category in ["theory", "reaction"]`
  * table：理論に関連するカラムを使う問題のみ

#### (4) 総合ミックスモード（mixed_exam）

* **目的**：試験を意識して、定義・データ・理論をバランスよく
* **構成例（10問）**

  * S-Def：2問
  * S-Q：2問
  * T-FC：4問
  * T-M：2問
* **フィルタ例**：

  * sentence：定義・理論を広く
  * table：表のすべての範囲から

#### (5) ショートテストモード（quick_check）

* **目的**：授業や自習の前後に 5問だけサクッと確認
* **構成例（5問）**

  * S-Def：1問
  * S-Q：1問
  * T-FC：2問
  * T-M：1問 or 0問

---

## 8. フィルタ機能による分野別・範囲別出題

mode 設計では、**フィルタ機能**によって「どの範囲から出題するか」を制御できる。

### 8-1. table型におけるフィルタ

table DataSet 側には、あらかじめフィルタ用のフィールドを用意しておくとよい。

アミノ酸の例：

* `isEssential`：必須アミノ酸なら true
* `classJa`：酸性 / 塩基性 / 極性 / 非極性 など
* `isAromatic`：芳香族かどうか
* `isBCAA`：分岐鎖アミノ酸かどうか

他テーマの例：

* 元素：`group`, `period`, `isMetal` など
* 英単語：`level`（初級/中級/上級）, `topic`（food, travel…）
* 物理：`field`（力学/波動/熱/電磁気…）, `difficulty` など

**mode 例：**

* `aa_essential_drill`

  * フィルタ：`isEssential = true`（必須アミノ酸だけ）
* `aa_all_20_drill`

  * フィルタ：なし（全 20 種から）
* `aa_aromatic_focus`

  * フィルタ：`isAromatic = true`（芳香族だけ）

### 8-2. sentence型におけるフィルタ

sentence DataSet（factSentences）では、
各文に **category / tags** を設定し、それを使ってフィルタする。

例：

* `category: "definition"`, `"theory"`, `"reaction"` など
* `tags: ["amino_acid", "essential"]`
* `tags: ["peptide_bond", "structure"]`
* `tags: ["isoelectric_point", "zwitterion"]`

**mode 例：**

* `theory_all`

  * sentence：`category in ["theory", "reaction"]`
* `essential_theory`

  * sentence：`tags` に `"essential"` を含む文のみ

### 8-3. mode とフィルタのセット化

1つの mode は、

* 問題タイプの構成（S-Def / S-Q / T-FC / T-M の比率）
* sentence 用フィルタ（category / tags）
* table 用フィルタ（行の条件）

をセットにした「出題メニュー」として定義する。

同じ mode 構成でも、フィルタ条件を変えることで：

* definitions_basic_all（全範囲の定義）
* definitions_basic_essential（必須アミノ酸の定義だけ）

といったバリエーションを簡単に増やせる。

---

## 9. mode設計＋フィルタ設計のチェックリスト

新しいテーマや新しい mode を作るときは、次の流れで設計する：

1. **テーマとサブテーマを決める**

   * 例：アミノ酸 / 元素 / 力学 / 英単語…
   * サブテーマ（必須だけ、芳香族だけ、力学の中の運動方程式だけ…）

2. **DataSet にフィルタ用のフィールド・タグを仕込む**

   * table：`isEssential`, `class`, `group`, `level` など
   * sentence：`category`, `tags` など

3. **mode の目的を 1 行で書く**

   * 例：「必須アミノ酸の定義と基本データを復習するモード」

4. **1 セッションの問題数を決める**

   * 5 / 10 / 20 など

5. **S-Def / S-Q / T-FC / T-M の比率を決める**

   * 例：S-Def 4, S-Q 2, T-FC 3, T-M 1

6. **sentence / table に対するフィルタ条件を決める**

   * sentence：どの category / tags を含めるか
   * table：どの条件の行だけを使うか

7. **難易度の方向性を決める**

   * 易しめ / 普通 / 難しめ
   * 空欄の数、選択肢の紛らわしさ、マッチングのペア数などで調整

8. **試しに 1 セッション分の想定問題を紙に書き出して確認する**

   * 同じ形式・同じトピックばかり続いていないか
   * mode の目的に対して、sentence と table のバランスが適切か
   * フィルタが効きすぎて「毎回ほぼ同じ問題」になっていないか

---

この指針に従えば、
アミノ酸だけでなく、任意のテーマ（数学・物理・生物・歴史・語学など）についても、

* **DataSet をどう作るか**
* **sentence型をどう増やすか**
* **table型で何を組み合わせて問うか**
* **mode とフィルタで出題パターンをどう組み立てるか**

を一貫した方針で設計できる。

今後、新しいテーマの問題ファイルを作るときは、
この「クイズ問題ファイル作成指針（汎用版＋mode設計）」をベースに、
必要な箇所だけテーマに合わせて具体化していく、という使い方を想定している。
